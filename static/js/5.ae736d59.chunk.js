(this.webpackJsonpproduct_list_app=this.webpackJsonpproduct_list_app||[]).push([[5,6],{107:function(e,t,a){e.exports={wrap:"Product_wrap__1v3L3",image:"Product_image__3GIla",listImage:"Product_listImage__1jwce",productName:"Product_productName__28jv9",productPrice:"Product_productPrice__J3kTz"}},108:function(e,t,a){e.exports={tileWrap:"ProductList_tileWrap__2ffmK",listWrap:"ProductList_listWrap__CqoLD"}},133:function(e,t,a){"use strict";a.r(t);var r=a(91),n=a(0),c=a.n(n),o=a(107),u=a.n(o),i=a(220),s=a(8),p=a.n(s),l=function(e){var t,a=e.image,n=e.name,o=e.price,s=e.chooseProduct,l=e.displayType;return c.a.createElement("div",{className:u.a.wrap,onClick:function(){return s(a,n,o)}},c.a.createElement(i.a,{hoverable:!0,cover:c.a.createElement("img",{src:a.replace("http","https"),alt:"phone",className:p()((t={},Object(r.a)(t,u.a.image,!0),Object(r.a)(t,u.a.tileImage,"tile"===l),Object(r.a)(t,u.a.listImage,"list"===l),t))})},c.a.createElement("h3",{className:u.a.productName},n),c.a.createElement("h1",{className:u.a.productPrice},o," \u20bd")))},_=a(108),m=a.n(_);t.default=function(e){var t,a=e.productList,n=e.chooseProduct,o=e.displayType;return c.a.createElement("div",{className:p()((t={},Object(r.a)(t,m.a.tileWrap,"tile"===o),Object(r.a)(t,m.a.listWrap,"list"===o),t))},a.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement(l,{image:e.image,name:e.name,price:e.price,chooseProduct:n,displayType:o}))})))}},140:function(e,t,a){e.exports={wrap:"ProductView_wrap__DlehH",searchBar:"ProductView_searchBar__fd6qR",productListWrap:"ProductView_productListWrap__2lcA-",preloader:"ProductView_preloader__1GgKd",image:"ProductView_image__1gxQq",pagination:"ProductView_pagination__2quUx",notFound:"ProductView_notFound__3h0mS",searchForm:"ProductView_searchForm__soCRU"}},163:function(e){e.exports=JSON.parse('[{"name":"Name","sortDirection":"asc"},{"name":"Name","sortDirection":"desc"},{"name":"Price","sortDirection":"asc"},{"name":"Price","sortDirection":"desc"}]')},164:function(e,t,a){e.exports={icon:"SortSelection_icon__1MI4j"}},175:function(e){e.exports=JSON.parse('[{"name":"tile","title":"","icon":"AppstoreOutlined"},{"name":"list","title":"","icon":"UnorderedListOutlined"}]')},225:function(e,t,a){"use strict";a.r(t);var r=a(112),n=a.n(r),c=a(113),o=a(216),u=a(0),i=a.n(u),s=function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={total_count:"",current_page:"",previous_page_url:"",next_page_url:"",pages_count:"",products:[]},e.next=3,fetch(t,{method:a}).then((function(e){return e.json()})).then((function(e){return r=e})).catch((function(e){alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b: ".concat(e))}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),p=a(140),l=a.n(p),_=a(222),m=a(226),d=a(221),g=a(62),f=a(223),h=function(e){var t=e.inputSearchValue,a=e.inputValue;return i.a.createElement(f.a,{value:a,onChange:function(e){t(e.target.value)}})},v=a(94),w=function(e){var t=e.type,a=e.title,r=e.icon,n=e.onClick,c=e.name;return i.a.createElement(v.a,{name:c,type:t,icon:r,onClick:n},a)},E=a(136),b=a(132),j=a(134),O=a(135),x=a(163),P=a(164),k=a.n(P),N=function(e){var t=e.sortChange,a=b.a.Option;return i.a.createElement(b.a,{defaultValue:"".concat(x[0].name.toLowerCase(),"-").concat(x[0].sortDirection),onChange:function(e){return t(e)}},x.map((function(e){return i.a.createElement(a,{key:"".concat(e.name.toLowerCase(),"-").concat(e.sortDirection),value:"".concat(e.name.toLowerCase(),"-").concat(e.sortDirection)},i.a.createElement("span",{className:k.a.icon},"asc"===e.sortDirection?i.a.createElement(j.a,null):i.a.createElement(O.a,null)),e.name)})))},C=a(224),S=function(e){var t=e.buttonsArr,r=e.activeButton,n=e.onChange;return i.a.createElement(C.a.Group,{value:r,onChange:n},t.map((function(e,t){return i.a.createElement(C.a.Button,{value:e.name,key:t},function(e){var t=a(109)[e];return i.a.createElement(t,null)}(e.icon),e.title)})))},y=a(175),D=a(133),L=a(18);t.default=function(e){var t=e.match,a=Object(u.useState)(!1),r=Object(o.a)(a,2),p=r[0],f=r[1],v=Object(u.useState)([]),b=Object(o.a)(v,2),j=b[0],O=b[1],x=Object(u.useState)(""),P=Object(o.a)(x,2),k=P[0],C=P[1],V=Object(u.useState)({total_count:"",current_page:"",previous_page_url:"",next_page_url:"",pages_count:""}),T=Object(o.a)(V,2),F=T[0],W=T[1],G=Object(u.useState)(!1),B=Object(o.a)(G,2),I=B[0],A=B[1],J=Object(u.useState)(!1),q=Object(o.a)(J,2),z=q[0],R=q[1],U=Object(u.useState)({image:"",name:"",price:""}),K=Object(o.a)(U,2),H=K[0],M=K[1],Q=Object(u.useState)({sortField:"name",sortDirection:"asc"}),X=Object(o.a)(Q,2),Y=X[0],Z=X[1],$=Object(u.useState)("tile"),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],re=function(){var e=Object(c.a)(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.params.current_page?t.params.current_page:1,e.next=3,s("https://www.lenvendo.ru/api/js-test-task/?page=".concat(a),"GET");case 3:r=e.sent,O(r.products),W({total_count:r.total_count,current_page:r.current_page,previous_page_url:r.previous_page_url,next_page_url:r.next_page_url}),0!==r.products.length?f(!0):f(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,u,i,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("-"),r=Object(o.a)(a,2),c=r[0],u=r[1],i="https://www.lenvendo.ru/api/js-test-task/?sort_field=".concat(c,"&sort_direction=").concat(u,"&page=1"),e.next=4,s(i,"GET");case 4:p=e.sent,Z({sortField:c,sortDirection:u}),O(p.products),W({total_count:p.total_count,current_page:p.current_page,previous_page_url:p.previous_page_url,next_page_url:p.next_page_url});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k?"https://www.lenvendo.ru/api/js-test-task/?search=".concat(k):"https://www.lenvendo.ru/api/js-test-task/",e.next=3,s(t,"GET");case 3:void 0==(a=e.sent).products?(O([]),A(!0)):(O(a.products),A(!1)),W({total_count:a.total_count,current_page:a.current_page,previous_page_url:a.previous_page_url,next_page_url:a.next_page_url});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t-F.current_page===1&&(a=F.next_page_url.replace("http","https")),t-F.current_page===-1&&(a=F.previous_page_url.replace("http","https")),(t-F.current_page>1||t-F.current_page<-1||t-F.current_page===0)&&(a="https://www.lenvendo.ru/api/js-test-task/?page=".concat(t)),k&&(a="".concat(a,"&search=").concat(k)),e.next=6,s("".concat(a,"&sort_field=").concat(Y.sortField,"&sort_direction=").concat(Y.sortDirection),"GET");case 6:r=e.sent,O(r.products),W({total_count:r.total_count,current_page:r.current_page,previous_page_url:r.previous_page_url,next_page_url:r.next_page_url}),setTimeout((function(){window.scrollTo(0,0)}),100);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){return i.a.createElement(_.a,{current:F.current_page,responsive:!0,defaultCurrent:F.current_page,total:F.total_count,onChange:function(e){return oe(e)},showSizeChanger:!1,hideOnSinglePage:!0,itemRender:function(e,t,a){return i.a.createElement(L.b,{to:"/product_list/page=".concat(e)},a)}})};return Object(u.useEffect)((function(){re()}),[]),i.a.createElement("div",{className:l.a.wrap},i.a.createElement("div",{className:l.a.searchBar},i.a.createElement(m.b,{className:l.a.searchForm},i.a.createElement(h,{inputSearchValue:function(e){C(e)},inputValue:k}),i.a.createElement(w,{name:"Search",title:"Search",onClick:ce,icon:i.a.createElement(E.a,null)})),i.a.createElement(m.b,null,i.a.createElement(N,{sortChange:ne}),i.a.createElement(S,{buttonsArr:y,activeButton:te,onChange:function(e){ae(e.target.value)}}))),p?i.a.createElement("div",{className:l.a.productListWrap},I?i.a.createElement("h2",{className:l.a.notFound},"\u041f\u043e \u0412\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"):i.a.createElement("div",null,i.a.createElement("div",{className:l.a.pagination},ue()),i.a.createElement(D.default,{productList:j,chooseProduct:function(e,t,a){M({name:t,price:a,image:e}),R(!0)},displayType:te}),i.a.createElement(d.a,{visible:z,onOk:function(){R(!1)},onCancel:function(){R(!1)},okText:"Add to cart"},i.a.createElement("img",{src:H.image.replace("http","https"),alt:"phone",className:l.a.image}),i.a.createElement("h3",null,H.name),i.a.createElement("h1",null,H.price," \u20bd")))):i.a.createElement("div",{className:l.a.preloader},i.a.createElement(g.a,{size:"large"})),i.a.createElement("div",{className:l.a.pagination},ue()))}}}]);
//# sourceMappingURL=5.ae736d59.chunk.js.map