(this.webpackJsonpproduct_list_app=this.webpackJsonpproduct_list_app||[]).push([[4],{137:function(e,t,a){e.exports={wrap:"ProductView_wrap__DlehH",searchBar:"ProductView_searchBar__fd6qR",productListWrap:"ProductView_productListWrap__2lcA-",preloader:"ProductView_preloader__1GgKd",image:"ProductView_image__1gxQq",pagination:"ProductView_pagination__2quUx",notFound:"ProductView_notFound__3h0mS",searchForm:"ProductView_searchForm__soCRU"}},160:function(e){e.exports=JSON.parse('[{"name":"Name","sortDirection":"asc"},{"name":"Name","sortDirection":"desc"},{"name":"Price","sortDirection":"asc"},{"name":"Price","sortDirection":"desc"}]')},161:function(e,t,a){e.exports={icon:"SortSelection_icon__1MI4j"}},172:function(e){e.exports=JSON.parse('[{"name":"tile","title":"","icon":"AppstoreOutlined"},{"name":"list","title":"","icon":"UnorderedListOutlined"}]')},173:function(e,t,a){e.exports={wrap:"Product_wrap__1v3L3",image:"Product_image__3GIla",listImage:"Product_listImage__1jwce",carContentList:"Product_carContentList__3VufJ",productName:"Product_productName__28jv9",productPrice:"Product_productPrice__J3kTz"}},181:function(e,t,a){e.exports={tileWrap:"ProductList_tileWrap__2ffmK",listWrap:"ProductList_listWrap__CqoLD"}},222:function(e,t,a){"use strict";a.r(t);var r=a(109),n=a.n(r),c=a(110),o=a(215),u=a(0),i=a.n(u),s=function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={total_count:"",current_page:"",previous_page_url:"",next_page_url:"",pages_count:"",products:[]},e.next=3,fetch(t,{method:a}).then((function(e){return e.json()})).then((function(e){return r=e})).catch((function(e){alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b: ".concat(e))}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),p=a(137),l=a.n(p),_=a(221),m=a(225),d=a(220),g=a(62),f=a(223),h=function(e){var t=e.inputSearchValue,a=e.inputValue;return i.a.createElement(f.a,{value:a,onChange:function(e){t(e.target.value)}})},v=a(93),w=function(e){var t=e.type,a=e.title,r=e.icon,n=e.onClick,c=e.name;return i.a.createElement(v.a,{name:c,type:t,icon:r,onClick:n},a)},E=a(133),b=a(130),j=a(131),O=a(132),x=a(160),P=a(161),C=a.n(P),N=function(e){var t=e.sortChange,a=b.a.Option;return i.a.createElement(b.a,{defaultValue:"".concat(x[0].name.toLowerCase(),"-").concat(x[0].sortDirection),onChange:function(e){return t(e)}},x.map((function(e){return i.a.createElement(a,{key:"".concat(e.name.toLowerCase(),"-").concat(e.sortDirection),value:"".concat(e.name.toLowerCase(),"-").concat(e.sortDirection)},i.a.createElement("span",{className:C.a.icon},"asc"===e.sortDirection?i.a.createElement(j.a,null):i.a.createElement(O.a,null)),e.name)})))},k=a(224),S=function(e){var t=e.buttonsArr,r=e.activeButton,n=e.onChange;return i.a.createElement(k.a.Group,{value:r,onChange:n},t.map((function(e,t){return i.a.createElement(k.a.Button,{value:e.name,key:t},function(e){var t=a(106)[e];return i.a.createElement(t,null)}(e.icon),e.title)})))},y=a(172),L=a(127),V=a(173),D=a.n(V),T=a(219),F=a(8),W=a.n(F),G=function(e){var t,a=e.image,r=e.name,n=e.price,c=e.chooseProduct,o=e.displayType;return i.a.createElement("div",{className:D.a.wrap,onClick:function(){return c(a,r,n)}},i.a.createElement(T.a,{hoverable:!0},i.a.createElement("div",{className:W()(Object(L.a)({},D.a.carContentList,"list"===o))},i.a.createElement("img",{src:a.replace("http","https"),alt:"phone",className:W()((t={},Object(L.a)(t,D.a.image,!0),Object(L.a)(t,D.a.listImage,"list"===o),t))}),i.a.createElement("div",null,i.a.createElement("h3",{className:D.a.productName},r),i.a.createElement("h1",{className:D.a.productPrice},n," \u20bd")))))},B=a(181),J=a.n(B),A=function(e){var t,a=e.productList,r=e.chooseProduct,n=e.displayType;return i.a.createElement("div",{className:W()((t={},Object(L.a)(t,J.a.tileWrap,"tile"===n),Object(L.a)(t,J.a.listWrap,"list"===n),t))},a.map((function(e,t){return i.a.createElement("div",{key:t},i.a.createElement(G,{image:e.image,name:e.name,price:e.price,chooseProduct:r,displayType:n}))})))},I=a(18);t.default=function(e){var t=e.match,a=Object(u.useState)(!1),r=Object(o.a)(a,2),p=r[0],f=r[1],v=Object(u.useState)([]),b=Object(o.a)(v,2),j=b[0],O=b[1],x=Object(u.useState)(""),P=Object(o.a)(x,2),C=P[0],k=P[1],L=Object(u.useState)({total_count:"",current_page:"",previous_page_url:"",next_page_url:"",pages_count:""}),V=Object(o.a)(L,2),D=V[0],T=V[1],F=Object(u.useState)(!1),W=Object(o.a)(F,2),G=W[0],B=W[1],J=Object(u.useState)(!1),q=Object(o.a)(J,2),z=q[0],R=q[1],U=Object(u.useState)({image:"",name:"",price:""}),K=Object(o.a)(U,2),H=K[0],M=K[1],Q=Object(u.useState)({sortField:"name",sortDirection:"asc"}),X=Object(o.a)(Q,2),Y=X[0],Z=X[1],$=Object(u.useState)("tile"),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],re=function(){var e=Object(c.a)(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.params.current_page?t.params.current_page:1,e.next=3,s("https://www.lenvendo.ru/api/js-test-task/?page=".concat(a),"GET");case 3:r=e.sent,O(r.products),T({total_count:r.total_count,current_page:r.current_page,previous_page_url:r.previous_page_url,next_page_url:r.next_page_url}),0!==r.products.length?f(!0):f(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,u,i,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("-"),r=Object(o.a)(a,2),c=r[0],u=r[1],i="https://www.lenvendo.ru/api/js-test-task/?sort_field=".concat(c,"&sort_direction=").concat(u,"&page=1"),e.next=4,s(i,"GET");case 4:p=e.sent,Z({sortField:c,sortDirection:u}),O(p.products),T({total_count:p.total_count,current_page:p.current_page,previous_page_url:p.previous_page_url,next_page_url:p.next_page_url});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C?"https://www.lenvendo.ru/api/js-test-task/?search=".concat(C):"https://www.lenvendo.ru/api/js-test-task/",e.next=3,s(t,"GET");case 3:void 0==(a=e.sent).products?(O([]),B(!0)):(O(a.products),B(!1)),T({total_count:a.total_count,current_page:a.current_page,previous_page_url:a.previous_page_url,next_page_url:a.next_page_url});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t-D.current_page===1&&(a=D.next_page_url.replace("http","https")),t-D.current_page===-1&&(a=D.previous_page_url.replace("http","https")),(t-D.current_page>1||t-D.current_page<-1||t-D.current_page===0)&&(a="https://www.lenvendo.ru/api/js-test-task/?page=".concat(t)),C&&(a="".concat(a,"&search=").concat(C)),e.next=6,s("".concat(a,"&sort_field=").concat(Y.sortField,"&sort_direction=").concat(Y.sortDirection),"GET");case 6:r=e.sent,O(r.products),T({total_count:r.total_count,current_page:r.current_page,previous_page_url:r.previous_page_url,next_page_url:r.next_page_url}),setTimeout((function(){window.scrollTo(0,0)}),100);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){return i.a.createElement(_.a,{current:D.current_page,responsive:!0,defaultCurrent:D.current_page,total:D.total_count,onChange:function(e){return oe(e)},showSizeChanger:!1,hideOnSinglePage:!0,itemRender:function(e,t,a){return i.a.createElement(I.b,{to:"/product_list/page=".concat(e)},a)}})};return Object(u.useEffect)((function(){re()}),[]),i.a.createElement("div",{className:l.a.wrap},i.a.createElement("div",{className:l.a.searchBar},i.a.createElement(m.b,{className:l.a.searchForm},i.a.createElement(h,{inputSearchValue:function(e){k(e)},inputValue:C}),i.a.createElement(w,{name:"Search",title:"Search",onClick:ce,icon:i.a.createElement(E.a,null)})),i.a.createElement(m.b,null,i.a.createElement(N,{sortChange:ne}),i.a.createElement(S,{buttonsArr:y,activeButton:te,onChange:function(e){ae(e.target.value)}}))),p?i.a.createElement("div",{className:l.a.productListWrap},G?i.a.createElement("h2",{className:l.a.notFound},"\u041f\u043e \u0412\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"):i.a.createElement("div",null,i.a.createElement("div",{className:l.a.pagination},ue()),i.a.createElement(A,{productList:j,chooseProduct:function(e,t,a){M({name:t,price:a,image:e}),R(!0)},displayType:te}),i.a.createElement(d.a,{visible:z,onOk:function(){R(!1)},onCancel:function(){R(!1)},okText:"Add to cart"},i.a.createElement("img",{src:H.image.replace("http","https"),alt:"phone",className:l.a.image}),i.a.createElement("h3",null,H.name),i.a.createElement("h1",null,H.price," \u20bd")))):i.a.createElement("div",{className:l.a.preloader},i.a.createElement(g.a,{size:"large"})),i.a.createElement("div",{className:l.a.pagination},ue()))}}}]);
//# sourceMappingURL=4.523e62cd.chunk.js.map